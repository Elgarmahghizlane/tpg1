(function(f){var p=window.AmazonUIPageJS||window.P,q=p._namespace||p.attributeErrors,d=q?q("AmazonDevicesDetailPageUtilityAssets",""):p;d.guardFatal?d.guardFatal(f)(d,window):d.execute(function(){f(d,window)})})(function(f,p,q){f.when("A").execute(function(d){d.declarative("popup-window","click",function(c){var a=c.data.windowName||"popupWindow",b=c.data.windowOptions||"width\x3d600,height\x3d400,scrollbars\x3dyes";c.$event.preventDefault();p.open(c.$target.prop("href"),a,b)})});"use strict";f.when("A").register("ods-element-factory",
function(d){var c=d.$;return{getHiddenInput:function(a,b){return c("\x3cinput\x3e").prop("name",a).prop("type","hidden").prop("value",b)}}});"use strict";f.register("ods-url-utils",function(){return{getUrlParam:function(d){for(var c=null,a=p.location.search.substr(1).split("\x26"),b=0;b<a.length;b++){var e=a[b].split("\x3d");e[0]===d&&(c=e[1])}return c}}});"use strict";f.when("A").register("csmCounter",function(d){var c=d.$;return{register:function(a,b,e){a&&b&&e&&c(a).bind(b,c.proxy(this.increment,
this,e))},increment:function(a){a&&p.ue.count(a,(p.ue.count(a)||0)+1)},update:function(a,b){a&&"number"===typeof b&&p.ue.count(a,b)}}});"use strict";f.register("function-utils",function(){return{throttle:function(d,c,a){var b,e,h,g=null,k=0;a||(a={});var l=function(){k=!1===a.leading?0:(new Date).getTime();g=null;h=d.apply(b,e);g||(b=e=null)};return function(){var n=(new Date).getTime();k||!1!==a.leading||(k=n);var m=c-(n-k);b=this;e=arguments;0>=m||m>c?(g&&(clearTimeout(g),g=null),k=n,h=d.apply(b,
e),g||(b=e=null)):g||!1===a.trailing||(g=setTimeout(l,m));return h}},debounce:function(d,c,a){var b;return function(){var e=this,h=arguments;clearTimeout(b);b=setTimeout(function(){b=null;a||d.apply(e,h)},c);a&&!b&&d.apply(e,h)}},memoize:function(d,c){var a={};return function(){for(var b=0<arguments.length?"":"%NO_ARGUMENTS%",e=0;e<arguments.length;e++)b&&(b+="-"),b+="object"===typeof arguments[e]?JSON.stringify(arguments[e]):arguments[e];a.hasOwnProperty(b)||(a[b]=c.apply(d,arguments));return a[b]}}}});
"use strict";f.when("A").register("odsRefTagUtils",function(d){var c=d.$;return{send:function(a,b){if(!a)throw Error("refTag is not defined");c.post((b||"/gp/digital/fiona/ajax/log.html")+"/ref\x3d"+a)}}});"use strict";f.when("A").register("ods-image-utilities",function(d){function c(b,e){var a=new Image;a.onload=function(){e.resolve(b)};a.onerror=function(){e.reject(b)};a.src=b}var a=d.$;return{preloadImage:function(b,e){var h=a.Deferred(),g;c(b,h);e&&d.capabilities.hires&&(g=a.Deferred(),c(e,g));
return{image:h.promise(),hiResImage:g?g.promise():q}},preloadImages:function(b){for(var e=[],h=0;h<b.length;h++){var g=a.Deferred();c(b[h],g);e.push(g.promise())}return e}}});"use strict";f.when("A").register("ODSEventDispatcher",function(d){return d.createClass({init:function(){this._callbacks={}},registerCallback:function(c,a){var b=this._callbacks[c]||[];-1===b.indexOf(a)&&b.push(a);this._callbacks[c]=b},unregisterCallback:function(c,a){if(c=this._callbacks[c])a=c.indexOf(a),-1<a&&c.splice(a,1)},
dispatch:function(c){var a=this._callbacks[c];if(a)for(var b=0;b<a.length;b++)a[b].apply(this,Array.prototype.slice.call(arguments,1))}})});"use strict";f.when("A","jQuery").register("BuyboxManagerFactory",function(d,c){function a(b,a,g,k){var l=d.copy(g);c.each(l,function(d){-1===["initialize","reset"].indexOf(d)&&(b[d]=k?c.proxy(a,null,d):c.proxy(g,d))})}function b(b,h,g,k){var d=function(r){if(!m&&(k?(k.initialize(),a(n,d,k,!1)):f=new g,m=new h(f),c.each(b,function(b,e){n[e]=c.proxy(m,e)}),"string"===
typeof r))return n[r].apply(m,Array.prototype.slice.call(arguments,1))},n={reset:function(){m?(k&&k.reset(),f&&f.reset(),m.reset()):d()},initialize:d},m,f;k&&a(n,d,k,!0);c.each(b,function(b,e){n[e]=c.proxy(d,null,e)});return n}return{create:function(e,a,g){return b(e,a,g)},extend:function(e,a,g){return b(e,a,null,g)}}});"use strict";f.when("jQuery","BuyboxManagerViewHelper").register("BuyboxManagerFormHelper",function(d,c){function a(b,e){return'\x3cinput type\x3d"hidden" name\x3d"'+b+'" value\x3d"'+
e+'" /\x3e'}function b(b){return 0<=b.attr("id").search("buyNow")}function e(b){return 0<=b.attr("id").search("addToCart")||0<=b.attr("id").search("mobile-installments")}function h(b,e){return d.map(b,function(b){return d(b).attr(e)})}'input[name\x3d"%NAME%"]'.replace("%NAME%","verificationSessionID");var g='input[name\x3d"%NAME%"]'.replace("%NAME%","a"),k='input[name\x3d"%NAME%"]'.replace("%NAME%","oid"),l='input[name\x3d"%NAME%"]'.replace("%NAME%","quantity"),f='input[name\x3d"%NAME%"]'.replace("%NAME%",
"asin"),m='input[name\x3d"%NAME%"]'.replace("%NAME%","offeringID"),u='input[name\x3d"%NAME%"]'.replace("%NAME%","quantity"),r=[g,k,l].concat([f,m,u]).join(", ");return{removeAllFormFields:function(b){b.find(r).remove()},getHiddenInputHTML:a,isFormBuyNow:b,isFormAddToCart:e,createMobileAppFormInputs:function(b){var e=b[0],h,g,c;e&&(h=e.asin,g=e.offerId,c=e.quantity);for(e=1;e<b.length;e++)h+="|"+b[e].asin,g+="|"+b[e].offerId,c+="|"+b[e].quantity;return""+(a("asin",h)+a("offeringID",g)+a("quantity",
c))},getViewData:function(a){if(b(a)){var d=h(a.find(f),"value")[0].split("|"),t=h(a.find(m),"value")[0].split("|");a=h(a.find(u),"value")[0].split("|");return c.buildRawData(d,t,a)}if(e(a))return d=h(a.find(g),"value"),t=h(a.find(k),"value"),a=h(a.find(l),"value"),c.buildRawData(d,t,a);throw Error("Add to order button not handled in buyBoxManagerFormHelper");},updateMobileAppFormInputsWithSubscriptionData:function(b,e,h){if(!d.isEmptyObject(b._digitalSubscriptionAsinMap)){var g=[],c=b._digitalSubscriptionAsinMap,
k;for(k in c)if(c.hasOwnProperty(k)){var l=c[k],f=l.name,l=l.value;g.push('input[name\x3d"%NAME%"]'.replace("%NAME%",f));g.push('input[name\x3d"%NAME%"]'.replace("%NAME%",l));delete c[k]}f=g.join(",");h.find(f).remove();b._digitalSubscriptionAsinMap=c}h="";for(c=1;c<e.length;c++)e[c].customAttribute&&(f="custom-name.%INDEX.1".replace("%INDEX",c),l="custom-value.%INDEX.1".replace("%INDEX",c),g=e[c],h+=a(f,g.customAttribute.name)+a(l,g.customAttribute.value),b._digitalSubscriptionAsinMap||(b._digitalSubscriptionAsinMap=
{}),b._digitalSubscriptionAsinMap[g.asin]={index:c,name:f,value:l});return h}}});"use strict";f.when("A","jQuery","BuyboxManagerViewBase").register("BuyboxManagerView",function(d,c,a){return a.extend({init:function(){this._super()},moveFieldsToContainer:function(b,e){for(var a=1,g=[],c;c===q||0<c.length;)c=b.find(this.getHiddenSelector("ASIN."+a)),0<c.length&&g.push(c.get(0),b.find(this.getHiddenSelector("offerListingID."+a)).get(0),b.find(this.getHiddenSelector("quantity."+a)).get(0)),a++;e.append(g)},
render:function(b){this._super(b);var e=this;this.$forms.each(function(a){var g=c(this),d=g.find('input[type\x3d"hidden"][name^\x3d"ASIN."]'),l=c.isArray(b)?b.length:0,f=e.$fieldsContainers.get(a);d.each(function(){var b=c(this);if(!b.parent().is(f)){var a=e._getAsinIndex(b);l++;b.prop("name","ASIN."+l);g.find('input[type\x3d"hidden"][name\x3d"offerListingID.'+a+'"]').prop("name","offerListingID."+l);g.find('input[type\x3d"hidden"][name\x3d"quantity.'+a+'"]').prop("name","quantity."+l)}})})},buildHTML:function(b,
e){return this.getHiddenInputHTML("ASIN."+e,b.asin)+this.getHiddenInputHTML("offerListingID."+e,b.offerId)+this.getHiddenInputHTML("quantity."+e,b.quantity)},getDataFromDOM:function(){var b=[],e=this.$fieldsContainers.first(),a=this;e.find('input[type\x3d"hidden"][name^\x3d"ASIN."]').each(function(){var g=c(this),d=a._getAsinIndex(g);b.push({asin:g.val(),offerId:e.find(a.getHiddenSelector("offerListingID."+d)).val(),quantity:parseInt(e.find(a.getHiddenSelector("quantity."+d)).val(),10)})});return b},
_getAsinIndex:function(b){return parseInt(b.prop("name").substring(5),10)}})});"use strict";f.when("A","jQuery").register("BuyboxManagerViewBase",function(d,c){return d.createClass({init:function(){this.reset()},registerAtcBtn:function(a){this.$atcBtns=this.$atcBtns.add(a)},registerForm:function(a){a="string"===typeof a?c(a):a;if(a instanceof c&&0<a.length&&0===this.$forms.has(a).length){this.$forms=this.$forms.add(a);var b=this.createFieldsContainer(a);this.moveFieldsToContainer(a,b)}},createFieldsContainer:function(a){var b=
a.find(".buyboxManagerHiddenFieldsContainer");0===b.length&&(b=c('\x3cdiv class\x3d"buyboxManagerHiddenFieldsContainer"\x3e'),a.append(b));0===this.$fieldsContainers.has(b).length&&(this.$fieldsContainers=this.$fieldsContainers.add(b));return b.first()},moveFieldsToContainer:function(a,b){throw Error("The view must override the moveFieldsToContainer function");},getHiddenSelector:function(a,b){var e='input[type\x3d"hidden"]';"string"===typeof a&&(e+='[name\x3d"'+a+'"]');"string"===typeof b&&(e+='[value\x3d"'+
b+'"]');return e},getHiddenInputHTML:function(a,b){return'\x3cinput type\x3d"hidden" name\x3d"'+a+'" value\x3d"'+b+'" /\x3e'},render:function(a){this.appendFormData(a)},appendFormData:function(a,b){b=b||1;var e="";if(c.isArray(a))for(var h=0;h<a.length;h++)e+=this.buildHTML(a[h],b+h);this.$fieldsContainers.html(e)},reset:function(){this.$forms=c();this.$fieldsContainers=c();this.registerForm(c("#addToCart"));this.$atcBtns=c();this.registerAtcBtn(c("#add-to-cart-button"));this.registerAtcBtn(c("#bb_to_cfg_button"));
this.registerAtcBtn(c("#buy-now-button"))}})});"use strict";f.when("jQuery").register("BuyboxManagerViewHelper",function(d){var c={FORM:"form",AW_MASH:"aw_mash",SHOW_HCTP_ATTACH:"show-hctp-attach",UNKNOWN:q};return{ViewType:c,getAtcBtnViewType:function(a){var b=c.UNKNOWN;a instanceof d||(a=d(a));var e=a.closest('.a-declarative[data-action\x3d"aw-mash"]'),h=a.closest('.a-declarative[data-action\x3d"show-hctp-attach"]');return 0<e.length?c.AW_MASH:0<a.closest("form").length?c.FORM:0<h.length?c.SHOW_HCTP_ATTACH:
b},buildRawData:function(a,b,e){var c={},g=[];d.each(a,function(a,d){var f=b.length>a?b[a]:"";a=e.length>a?parseInt(e[a],10):1;var m=d+":"+f;c.hasOwnProperty(m)?g[c[m]].quantity+=a:c[m]=g.push({asin:d,offerId:f,quantity:a})-1});return g}}});"use strict";f.when("A","jQuery","ODSEventDispatcher","BuyboxManagerViewBase").register("BuyboxManagerController",function(d,c,a,b){return d.createClass({init:function(e){if(!(e instanceof b))throw new TypeError("The view must inherits from BuyboxManagerViewBase");
this._view=e;this._eventDispatcher=new a;this._enableEvents(!0);this.reset();var c=this;d.on("a:dropdown:mobileQuantityDropDown:select",function(b){var a=c._asinsData&&c._asinsData.length&&c._asinsData[0];a&&c.setPageAsin(a.asin,a.offerId,parseInt(b.value,10))})},_enableEvents:function(b){c.each("UpsellAsinAdded UpsellAsinRemoved UpsellAsinChanged PageAsinAdded PageAsinReplaced PageAsinChanged".split(" "),c.proxy(function(a,g){b?(this["register"+g]=c.proxy(this._eventDispatcher,"registerCallback",
g),this["unregister"+g]=c.proxy(this._eventDispatcher,"unregisterCallback",g)):(delete this["register"+g],delete this["unregister"+g])},this))},_parseInitialAsins:function(){var b=this._view.getDataFromDOM();if(b)for(var a=0;a<b.length;a++)this[0===a?"setPageAsin":"setUpsellAsin"](b[a].asin,b[a].offerId,b[a].quantity)},_dispatchSetUpsellAsinEvents:function(b,a,c,d){d!==c&&(0===d&&0<c?this._eventDispatcher.dispatch("UpsellAsinAdded",b,a,c,d):0===c&&0<d&&this._eventDispatcher.dispatch("UpsellAsinRemoved",
b,a,c,d),this._eventDispatcher.dispatch("UpsellAsinChanged",b,a,c,d))},_indexOfAsin:function(b,a){a=a||"";for(var c=0;c<this._asinsData.length;c++)if(this._asinsData[c].asin===b&&this._asinsData[c].offerId===a)return c;return-1},setUpsellAsin:function(b,a,c,d){if("string"!==typeof b||0>=b.length)throw new TypeError("The asin argument is required");var f=this._indexOfAsin(b,a),n=0;a=a||"";c="number"===typeof c?Math.max(0,c):1;if(0===f)throw Error("To modify the pageAsin, use setPageAsin() instead.");
if(0<f)d=this._asinsData[f],n=d.quantity,0>=c?this._asinsData.splice(f,1):d.quantity=c;else if(0<c)this._asinsData.push({asin:b,offerId:a,quantity:c,customAttribute:d});else return!1;this.render();this._dispatchSetUpsellAsinEvents(b,a,c,n,f);return!0},registerForm:function(b){this._view.registerForm(b);this.render()},registerAtcBtn:function(b){this._view.registerAtcBtn(b);this.render()},setPageAsin:function(b,a,c){if("string"!==typeof b||0>=b.length)throw new TypeError("The asin argument is required");
var d=this._indexOfAsin(b,a),f=0<this._asinsData.length?this._asinsData[0].quantity:0;a=a||"";if(0>=c)throw new TypeError("The quantity of the page asin must be \x3e 0.");c="number"===typeof c?Math.max(1,c):1;if(0===d&&c===f)return!1;0<d&&this.setUpsellAsin(b,a,0);this._asinsData[0]={asin:b,offerId:a,quantity:c};this.render();-1<d?this._eventDispatcher.dispatch("PageAsinReplaced",b,a,c,f):this._eventDispatcher.dispatch("PageAsinAdded",b,a,c);this._eventDispatcher.dispatch("PageAsinChanged",b,a,c);
return!0},addUpsellAsin:function(b,a,c){c=c||1;for(var d=0;d<this._asinsData.length;d++){var f=this._asinsData[d];if(f.asin===b){this.setUpsellAsin(b,a,f.quantity+c);return}}this.setUpsellAsin(b,a,c)},render:function(){this._view.render(this._asinsData)},getAsins:function(){return d.copy(this._asinsData)},getUpsellAsins:function(){var b=this.getAsins();b.splice(0,1);return b},getPageAsin:function(){return d.copy(this._asinsData[0])},reset:function(){this._asinsData=[];this._parseInitialAsins()}})});
"use strict";f.when("BuyboxManagerController","BuyboxManagerView","BuyboxManagerFactory","jQuery").register("BuyboxManager",function(d,c,a,b){return a.create("getAsins getUpsellAsins setUpsellAsin getPageAsin setPageAsin registerUpsellAsinChanged registerUpsellAsinAdded registerUpsellAsinRemoved registerPageAsinChanged registerPageAsinAdded registerPageAsinReplaced unregisterUpsellAsinChanged unregisterUpsellAsinRemoved unregisterUpsellAsinAdded unregisterPageAsinChanged unregisterPageAsinAdded unregisterPageAsinReplaced addUpsellAsin registerForm registerAtcBtn".split(" "),
d,c)});"use strict";f.when("jQuery","BuyboxManagerViewHelper").register("BuyboxManagerMashHelper",function(d,c){return{createInputs:function(a){var b={a:[],oid:[],quantity:[]};d.each(a,function(a,c){b.a.push(c.asin);b.oid.push(c.offerId);b.quantity.push(c.quantity)});b.a=b.a.join("|");b.oid=b.oid.join("|");b.quantity=b.quantity.join("|");return b},getViewData:function(a){var b=a.inputs.a.split("|"),e=a.inputs.oid.split("|");a=a.inputs.quantity.split("|");return c.buildRawData(b,e,a)},setDeclarativeMultiple:function(a){a.buttonID=
"add-multiple-to-cart"},getDeclarativeDataFromBtn:function(a){return a.closest('.a-declarative[data-action\x3d"aw-mash"]').data("awMash")},isAddToCart:function(a){return"add-to-cart"===a.buttonID},updateInputWithSubscriptionData:function(a,b,c){if(!d.isEmptyObject(a._digitalSubscriptionAsinMap)){var h=a._digitalSubscriptionAsinMap,g;for(g in h)if(h.hasOwnProperty(g)){var f=h[g],l=f.index;if(c.length<=l||c[l].asin!==g)b[f.name]&&delete b[f.name],b[f.value]&&delete b[f.value],delete h[g]}a._digitalSubscriptionAsinMap=
h}d.each(c,function(c,e){if(e.customAttribute){var d="custom-name."+(c+1)+".1",g="custom-value."+(c+1)+".1";b[d]=e.customAttribute.name;b[g]=e.customAttribute.value;a._digitalSubscriptionAsinMap||(a._digitalSubscriptionAsinMap={});a._digitalSubscriptionAsinMap[e.asin]={index:c,name:d,value:g}}})}}});"use strict";f.when("ODSBuyboxManagerController","BuyboxManager","BuyboxManagerFactory","A","jQuery").register("ODSBuyboxManager",function(d,c,a,b,e){return a.extend(["addMetadata","getMetadata","getAsins",
"getPageAsin","getUpsellAsins"],d,c)});"use strict";f.when("BuyboxManager","ODSBuyboxAsinMetadata","A","jQuery").register("ODSBuyboxManagerController",function(d,c,a,b){return a.createClass({init:function(){this.reset()},addMetadata:function(b){if(!(b instanceof c))throw Error("The argument metadata must be an instance of ODSBuyboxAsinMetadata");if(!b.isValid())throw Error("The metadata is NOT valid");this._metadatas[b.asin+":"+b.offerId]=b.clone()},getMetadata:function(b,a){return this._metadatas[b+
":"+a]},getMetadatas:function(){return a.copy(this._metadatas)},enhanceAsinsData:function(a){if("undefined"!==typeof a&&null!==a&&0!==a.length){var c=this;b.isArray(a)?a=b.map(a,function(a){return b.extend({},a,{metadata:c.getMetadata(a.asin,a.offerId)})}):a.metadata=c.getMetadata(a.asin,a.offerId)}return a},getPageAsin:function(){return this.enhanceAsinsData(d.getPageAsin())},getUpsellAsins:function(){return this.enhanceAsinsData(d.getUpsellAsins())},getAsins:function(){return this.enhanceAsinsData(d.getAsins())},
reset:function(){this._metadatas={}}})});"use strict";f.when("A","jQuery").register("ODSBuyboxAsinMetadata",function(d,c){var a=d.createClass({init:function(b,a,c,d,f,l,n){this.asin=b;this.offerId=a;this.buyingPrice=c;this.listingPrice=d;this.title=f;this.imageUrl=l;this.availabilityMessage=n},isValid:function(){var b="string"===typeof this.asin&&0<this.asin.length;return"number"===typeof this.buyingPrice&&b},clone:function(){return new a(this.asin,this.offerId,this.buyingPrice,this.listingPrice,
this.title)}});return a});"use strict";f.when("A","jQuery","a-modal").register("singleton-popup-modal",function(d,c,a){function b(b){null===k?(g=f.appendTo(c("body")),k=a.create(g,b)):k.update(b);k.show()}function e(){k&&k.hide()}var f=c('\x3cdiv style\x3d"display:none"\x3e'),g=null,k=null;d.declarative("cfg-singleton-modal-close","click",e);d.declarative("cfg-singleton-modal-open","click",function(a){b({inlineContent:a.data.inlineContent,header:a.data.header,width:a.data.width||"502",position:"triggerRight"},
!0)});return{show:b,hide:e,destroy:function(){k&&(a.remove(k),k=null)}}});"use strict";f.when("A").register("MakoCommonCartHelper",function(d){var c=d.$,a=d.createClass({init:function(b,a,c,d){this.sessionId=b||"";this.clientName=a||"";this.asinsData=c||[];this.additionalData=d||{};this.reftag;this.hasBeenPosted=!1},setSessionId:function(b){this.sessionId=b;return this},setClientName:function(b){this.clientName=b;return this},setAsinsData:function(b){if(Array.isArray(b))return this.asinsData=b,this},
addAsinData:function(b,a,c){this.asinsData.push({asin:b,offerId:a,quantity:c});return this},setAdditionalData:function(b){this.additionalData=b;return this},setReftag:function(b){this.reftag=b;return this},sendRequest:function(){if(this.hasBeenPosted)f.log("Request has already been sent.","WARN");else if(this._verifyRequest()){var b=this._buildRequestData();this.hasBeenPosted=!0;return c.ajax({url:"/gp/add-to-cart/json/"+(this.reftag?"ref\x3d"+this.reftag:""),type:"POST",data:b})}},_verifyRequest:function(){var b=
!0;this.sessionId&&""!==this.sessionId||(b=!1,f.log("SessionId is undefined or blank","WARN"));this.asinsData&&this.asinsData.length||(b=!1,f.log("No asins data exist for cart handler request","WARN"));return b},_buildRequestData:function(){var b={};b.verificationSessionID=this.sessionId;b.clientName=this.clientName;for(var a=0;a<this.asinsData.length;a++){var c=this.asinsData[a];b["asin."+a]=c.asin;b["offeringID."+a]=c.offerId||c.offerListingID;b["quantity."+a]=c.quantity}if(this.additionalData)for(var d in this.additionalData)this.additionalData.hasOwnProperty(d)&&
(b[d]=this.additionalData[d]);return b}});return{createRequest:function(b,c){return new a(b,c)}}});"use strict";f.when().register("ExtraDataHelper",function(){function d(a,b){return a&&a.name&&0===a.name.indexOf(b)}function c(a,b){var c=Array.prototype.slice.call(a.elements);a=c.filter(function(a){return a&&a.tagName&&"input"===a.tagName.toLowerCase()&&d(a,["custom-name",b,""].join("."))});c=c.filter(function(a){return a&&a.tagName&&"input"===a.tagName.toLowerCase()&&d(a,["custom-value",b,""].join("."))});
return{names:a,values:c}}function a(a,b){return a!==q&&null!==a?a:b}function b(b,c,d){c=a(c,"([0-9]+)");d=a(d,"([0-9]+)");return new RegExp([b,c,d].join("."))}function e(a,b){var c=document.createElement("input");c.type="hidden";c.name=a;c.value=b;return c}function f(a,c,d,e){var g=b("custom-name",a);return c.reduce(function(b,c){var f=g.exec(c);if(f){var f=f[1],h=["custom-value",a,f].join(".");b[f]={name:d(c),value:e(h)}}return b},{})}function g(a,b,c,d){Object.keys(b).forEach(function(e){var f=
b[e],g=["custom-name",a,e].join(".");e=["custom-value",a,e].join(".");"object"===typeof f&&(c(g,f.name),d(e,f.value))})}function k(a,b){var c=Object.keys(a),d=function(b){return a[b]};return f(b,c,d,d)}function l(a,b,c){var d=function(b,c){a[b]=c};g(c,b,d,d)}function n(a,b){a=c(a,b);var d=a.names.map(function(a){return a.name}),e=function(a){return function(b){var c=a.filter(function(a){return a.name===b});return c.length?c[0].value:q}};return f(b,d,e(a.names),e(a.values))}function m(a,b,d){var f=
c(a,d),h=function(b){return function(c,d){var f=b.filter(function(a){return a.name===c});f.length?f.forEach(function(a){a.value=d}):a.appendChild(e(c,d))}};g(d,b,h(f.names),h(f.values))}function p(a){return Object.keys(a).reduce(function(b,c){c=a[c];b[c.name]=c.value;return b},{})}function r(a,b){var c=Object.keys(a).reduce(function(b,c){c=a[c];b[c.name]=c;return b},{});Object.keys(b).forEach(function(d){if(c[d])c[d].value=b[d];else{var e=w(a),f={name:d,value:b[d]};a[e]=f;c[d]=f}});return a}function v(a,
b){return a-b}function w(a){a=Object.keys(a).map(function(a){return parseInt(a)}).sort(v);if(a.length){if(1!==a[0])return 1;for(var b=1;b<a.length;b++)if(1!==a[b]-a[b-1])return a[b-1]+1;return a.length+1}return 1}return{getObjectExtraData:function(b,c){c=a(c,1);return p(k(b,c))},setObjectExtraData:function(b,c,d){d=a(d,1);c=r(k(b,d),c);l(b,c,d)},getFormExtraData:function(b,c){if(!b)return{};c=a(c,1);return p(n(b,c))},setFormExtraData:function(b,c,d){b&&(d=a(d,1),c=r(n(b,d),c),m(b,c,d))}}})});
/* ******** */
(function(e){var h=window.AmazonUIPageJS||window.P,k=h._namespace||h.attributeErrors,c=k?k("DetailPagePreRegistrationAssets",""):h;c.guardFatal?c.guardFatal(e)(c,window):c.execute(function(){e(c,window)})})(function(e,h,k){e.when("A","jQuery","a-checkbox","a-dropdown","ExtraDataHelper").register("PreRegistration.View",function(c,d,b,g,f){return c.createClass({init:function(){this.reset()},reset:function(){this._giftingCheckbox=b("#gift-wrap");this._giftingCheckboxElement=d("#gift-wrap");this._accountLinkingCheckbox=
b("#account-linking");this._installmentAccountLinkingCheckbox=b("#installment-account-linking");this._desktopQuantityDropdown=g.getSelect("#quantity");this._mobileQuantityDropdown=g.getSelect("#mobileQuantityDropDown");this._quantityAlert=d("#preregistrationQuantityAlert");this._installmentQuantityAlert=d("#installmentPreregistrationQuantityAlert");this._giftingAlert=d("#preregistrationGiftingAlert");this._installmentGiftingAlert=d("#installmentPreregistrationGiftingAlert");this._declaratives=d("#atc-declarative, #buyNow .a-declarative");
this._forms=d("form#addToCart, form#mobile-installments, form#buyNow, form#buyNowCheckout");this._quantityAlert.length&&(this._quantityAlertFormatString=this._quantityAlert.html())},updateQuantityLimit:function(b){this._quantityAlert.length&&this._quantityAlertFormatString&&(b=this._quantityAlertFormatString.replace("$PREREG_MAX_QUANTITY",b),this._quantityAlert.html(b),this._installmentQuantityAlert.html(b))},_setDeclarativeExtraData:function(b){this._declaratives.each(function(){var a=d(this),c=
a.data("action");c&&(a=a.data(c))&&a.inputs&&f.setObjectExtraData(a.inputs,b)})},_setFormExtraData:function(b){this._forms.each(function(){f.setFormExtraData(this,b)})},setAccountLinkingAttributeValue:function(b){var a={};a.isDevicePreRegistered=b;this._setDeclarativeExtraData(a);this._setFormExtraData(a)},_isCheckboxChecked:function(b){return!b.isEmpty()&&b.isChecked()},isGiftingChecked:function(){return this._isCheckboxChecked(this._giftingCheckbox)},isAccountLinkingChecked:function(){return this._isCheckboxChecked(this._accountLinkingCheckbox)},
isInstallmentAccountLinkingChecked:function(){return this._isCheckboxChecked(this._installmentAccountLinkingCheckbox)},getQuantity:function(){return this._desktopQuantityDropdown?this._desktopQuantityDropdown.val():this._mobileQuantityDropdown?this._mobileQuantityDropdown.val():1},scrollGiftingIntoView:function(){this._giftingCheckboxElement.length&&!c.onScreen(this._giftingCheckboxElement,5)&&this._giftingCheckboxElement[0].scrollIntoView()},_hide:function(b){b.addClass("aok-hidden")},_show:function(b){b.removeClass("aok-hidden")},
_isHidden:function(b){return b.hasClass("aok-hidden")},showGiftingAlert:function(){this._show(this._giftingAlert);this._show(this._installmentGiftingAlert)},hideGiftingAlert:function(){this._hide(this._giftingAlert);this._hide(this._installmentGiftingAlert)},showQuantityAlert:function(){this._show(this._quantityAlert);this._show(this._installmentQuantityAlert)},hideQuantityAlert:function(){this._hide(this._quantityAlert);this._hide(this._installmentQuantityAlert)},isGiftingAlertHidden:function(){return this._isHidden(this._giftingAlert)},
enableAccountLinkingCheckbox:function(b){this._accountLinkingCheckbox.enable();this._installmentAccountLinkingCheckbox.enable();d("#preRegCheckboxText").removeClass("a-color-tertiary");d("#installmentPreRegCheckboxText").removeClass("a-color-tertiary");b&&(this._accountLinkingCheckbox.check(),this._installmentAccountLinkingCheckbox.check())},disableAccountLinkingCheckbox:function(){this._accountLinkingCheckbox.uncheck();this._installmentAccountLinkingCheckbox.uncheck();this._accountLinkingCheckbox.disable();
this._installmentAccountLinkingCheckbox.disable();d("#preRegCheckboxText").addClass("a-color-tertiary");d("#installmentPreRegCheckboxText").addClass("a-color-tertiary")},isAccountLinkingCheckboxEnabled:function(){return this._accountLinkingCheckbox.isEnabled()},updateAccountLinkingCheckbox:function(b){b?(this._accountLinkingCheckbox.check(),this._installmentAccountLinkingCheckbox.check()):(this._accountLinkingCheckbox.uncheck(),this._installmentAccountLinkingCheckbox.uncheck())},openPopup:function(b){h.open(b,
"popupWindow","width\x3d600,height\x3d400,scrollbars\x3dyes")}})});e.when("A","PreRegistration.View","PreRegistration.Metrics").register("PreRegistration.Controller",function(c,d,b){var g=c.$,f,e=c.createClass({init:function(a){this._view=new d;this._metrics=new b;this.reset(a);this._bindEventsOnce()},reset:function(a){this._view.reset();this._bindEventsDOM();"object"===typeof a?(this._showStatus=a.showStatus,this._maxQuantityLimit=a.maxQuantity,this._defaultValue=a.defaultValue,this._status=a.status,
this._asin=a.asin,this._lastAccountLinkingValue=this._defaultValue,this._view.updateQuantityLimit(this._maxQuantityLimit),this._view.setAccountLinkingAttributeValue(this._defaultValue),this._showStatus&&this._view.isGiftingChecked()&&this._giftingCheckboxChecked(),this._checkQuantity(this._view.getQuantity()),this._showStatus?this._metrics.emitGiftingAndAccountLinkingLoadedMetric(this._asin):this._metrics.emitGiftingLoadedMetric(this._asin)):this._view.setAccountLinkingAttributeValue("false")},_checkQuantity:function(a){a>
this._maxQuantityLimit&&this._isStatusAllowedConditional()?(this._view.scrollGiftingIntoView(),this._disableAccountLinkingCheckbox(),this._metrics.emitALForceUncheckedQuantityHigh(this._asin),this._view.isGiftingAlertHidden()&&this._view.showQuantityAlert()):this._view.isGiftingChecked()||(this._enableAccountLinkingCheckbox(),this._view.hideQuantityAlert())},_giftingCheckboxChecked:function(){this._view.hideQuantityAlert();this._view.showGiftingAlert();this._view.isAccountLinkingChecked()&&this._metrics.emitALForceUncheckedGiftingSelected(this._asin);
this._disableAccountLinkingCheckbox()},_giftingCheckboxUnchecked:function(){this._view.hideGiftingAlert();this._enableAccountLinkingCheckbox();this._checkQuantity(this._view.getQuantity())},_enableAccountLinkingCheckbox:function(){if(!this._view.isAccountLinkingCheckboxEnabled()){var a=this._lastAccountLinkingValue;this._view.enableAccountLinkingCheckbox(a);this._view.setAccountLinkingAttributeValue(a?"true":"false")}},_disableAccountLinkingCheckbox:function(){this._view.isAccountLinkingCheckboxEnabled()&&
(this._lastAccountLinkingValue=this._view.isAccountLinkingChecked(),this._view.disableAccountLinkingCheckbox(),this._view.setAccountLinkingAttributeValue("false"))},_bindEventsOnce:function(){c.on("a:pageUpdate",this._handlePageUpdate.bind(this));c.on("a:dropdown:selected:quantity",this._handleQuantityChange.bind(this));c.on("a:popover:beforeSlide:preRegistration-secview",this._handlePopupClickMobile.bind(this));c.declarative("mako-gifting-declarative","click",this._handleGiftingClick.bind(this));
c.declarative("mako-gifting-declarative-mobile","click",this._handleGiftingClick.bind(this));c.declarative("mako-preReg-declarative","click",this._handleAccountLinkingClick.bind(this));c.declarative("mako-installment-preReg-declarative","click",this._handleInstallmentAccountLinkingClick.bind(this));c.declarative("preReg-popup-window","click",this._handlePopupClick.bind(this));c.declarative("preReg-popup-window","mouseenter",this._handlePopupHover.bind(this));c.declarative("installment-preReg-popup-window",
"click",this._handlePopupClick.bind(this));c.declarative("installment-preReg-popup-window","mouseenter",this._handlePopupHover.bind(this))},_bindEventsDOM:function(){g("#installments-button").click(this._handleATC.bind(this,"ATC"));g("#add-to-cart-button").click(this._handleATC.bind(this,"ATC"));g("#buy-now-button").bind("click.makoPreRegistration",this._handleATC.bind(this,"BUYNOW"));g("#one-click-button").click(this._handleATC.bind(this,"ONECLICK"))},_handlePageUpdate:function(){this._view.reset();
var a=this._defaultValue;this._showStatus&&(a=this._view.isAccountLinkingChecked());this._view.setAccountLinkingAttributeValue(a?"true":"false")},_handleQuantityChange:function(a){this._checkQuantity(a.value)},_handleGiftingClick:function(a){this._isInputEvent(a)&&(this._view.isGiftingChecked()?(this._giftingCheckboxChecked(),this._metrics.emitGiftingCheckedMetric(this._asin)):(this._giftingCheckboxUnchecked(),this._metrics.emitGiftingUncheckedMetric(this._asin)))},_handleAccountLinkingClick:function(a){this._isInputEvent(a)&&
((a=this._view.isAccountLinkingChecked())?this._metrics.emitALCheckedMetric(this._asin):this._metrics.emitALUncheckedMetric(this._asin),this._lastAccountLinkingValue=a,this._view.updateAccountLinkingCheckbox(a),this._view.setAccountLinkingAttributeValue(a?"true":"false"))},_handleInstallmentAccountLinkingClick:function(a){this._isInputEvent(a)&&((a=this._view.isInstallmentAccountLinkingChecked())?this._metrics.emitALCheckedMetric(this._asin):this._metrics.emitALUncheckedMetric(this._asin),this._lastAccountLinkingValue=
a,this._view.updateAccountLinkingCheckbox(a),this._view.setAccountLinkingAttributeValue(a?"true":"false"))},_handlePopupClick:function(a){a.$event.preventDefault();a=a.$target.prop("href");this._view.openPopup(a);this._metrics.emitWhyIsThisImportantClickedMetric(this._asin)},_handlePopupClickMobile:function(a){this._metrics.emitWhyIsThisImportantClickedMetric(this._asin)},_handlePopupHover:function(a){this._metrics.emitPopupHoverMetric(this._asin)},_handleATC:function(a){this._metrics.emitATCGiftingALSelectionMetric(this._asin,
a,this._view.isGiftingChecked(),this._view.isAccountLinkingChecked())},_isInputEvent:function(a){return"input"===a.targetTag.toLowerCase()},_isStatusAllowedConditional:function(){return"ALLOWED_CONDITIONAL"===this._status}});return{getInstance:function(a){f?a&&f.reset(a):f=new e(a);return f}}});e.when("A","odsRefTagUtils").register("PreRegistration.Metrics",function(c,d){return c.createClass({emitGiftingAndAccountLinkingLoadedMetric:function(b){d.send("PREREGISTRATION_"+b+"_GIFTING_AL_LOADED")},emitGiftingLoadedMetric:function(b){d.send("PREREGISTRATION_"+
b+"_ONLY_GIFTING_LOADED")},emitALForceUncheckedQuantityHigh:function(b){d.send("PREREGISTRATION_"+b+"_AL_FORCE_UNCHECKED_QUANTITYHIGH")},emitALForceUncheckedGiftingSelected:function(b){d.send("PREREGISTRATION_"+b+"_AL_FORCE_UNCHECKED_GIFTINGSELECTED")},emitGiftingCheckedMetric:function(b){d.send("PREREGISTRATION_"+b+"_GIFTING_CHECKED")},emitGiftingUncheckedMetric:function(b){d.send("PREREGISTRATION_"+b+"_GIFTING_UNCHECKED")},emitALCheckedMetric:function(b){d.send("PREREGISTRATION_"+b+"_AL_CHECKED")},
emitALUncheckedMetric:function(b){d.send("PREREGISTRATION_"+b+"_AL_UNCHECKED")},emitWhyIsThisImportantClickedMetric:function(b){d.send("PREREGISTRATION_"+b+"_WHY_IS_THIS_IMPORTANT_CLICKED")},emitPopupHoverMetric:function(b){d.send("PREREGISTRATION_"+b+"_WHY_IS_THIS_IMPORTANT_HOVER")},emitATCGiftingALSelectionMetric:function(b,c,f,e){f?d.send("PREREGISTRATION_"+b+"_"+c+"_GIFTING_CHECKED"):d.send("PREREGISTRATION_"+b+"_"+c+"_GIFTING_UNCHECKED");e?d.send("PREREGISTRATION_"+b+"_"+c+"_AL_CHECKED"):d.send("PREREGISTRATION_"+
b+"_"+c+"_AL_UNCHECKED")}})})});
/* ******** */
